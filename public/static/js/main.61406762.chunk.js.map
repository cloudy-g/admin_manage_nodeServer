{"version":3,"sources":["App.jsx","redux/reducer/userReducer.js","redux/reducer/index.js","redux/reducer/setHead.js","redux/index.js","index.js","redux/action_Type.js","utils/localStorageUtils.js","components/isLoading/index.jsx","utils/index.js"],"names":["Login","lazy","Admin","App","history","useHistory","account","localStore","getUser","useEffect","replace","fallback","path","exact","render","inituser","combineReducers","setHead","state","action","type","data","SET_HEADT_TITLE","userReducer","LOGIN_USER_SUCCESS","Object","assign","LOGIN_USER_FAILED","GET_USER","REMOVE_USER","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","store","document","getElementById","window","localStorage","USER_KEY","saveUser","value","setItem","JSON","stringify","tem","getItem","parse","remove","removeItem","Loading","tip","message","description","loginReducer","Error","formatUrl","url","formatDate","date","regExp","format","dataMapToOptions","options","i","length","name","childList","extractMenus","menus","reqmenuList","map","v","includes","key","children","childs","filter","listMapToMenus","res","push","getTitle","list","arr","j","shift","title"],"mappings":"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","file":"static/js/main.61406762.chunk.js","sourcesContent":["\r\nimport { lazy, Suspense, useEffect } from 'react';\r\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport './App.css';\r\nimport localStore from './utils/localStorageUtils';\r\nimport { hasPrivilege } from '@/utils';\r\n\r\nimport Loading from './components/isLoading';\r\nconst Login = lazy(() => import('./pages/login'));\r\nconst Admin = lazy(() => import('./pages/admin'));\r\n\r\nexport default function App() {\r\n  const history = useHistory();\r\n  let account = localStore.getUser();\r\n\r\n  useEffect(() => {\r\n    if (account == null) {\r\n      history.replace('/login')\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Suspense fallback={<Loading></Loading>}>\r\n        <Switch>\r\n          <Route path=\"/login\" exact render={() => <Login ></Login>}></Route>\r\n          <Route path=\"/\" render={() => <Admin></Admin>}></Route>\r\n        </Switch>\r\n      </Suspense>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n","import {\r\n  LOGIN_USER_FAILED,\r\n  LOGIN_USER_SUCCESS,\r\n  GET_USER,\r\n  REMOVE_USER\r\n} from '../action_Type'\r\nimport localStore from '@/utils/localStorageUtils'\r\n\r\nconst inituser = localStore.getUser();\r\nexport default (state = inituser, action) => {\r\n  const {\r\n    type,\r\n    data\r\n  } = action;\r\n  switch (type) {\r\n    case LOGIN_USER_SUCCESS:\r\n      return Object.assign({}, state, data);\r\n    case LOGIN_USER_FAILED:\r\n      return Object.assign({}, data);\r\n    case GET_USER:\r\n      return state;\r\n    case REMOVE_USER:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import setHead from './setHead';\r\nimport userReducer from './userReducer';\r\nimport {\r\n  combineReducers\r\n} from 'redux';\r\n\r\nexport default combineReducers({\r\n  setHead,\r\n  userReducer\r\n})","import {\r\n  SET_HEADT_TITLE\r\n} from '../action_Type';\r\n\r\nconst initHead = \"首页\"\r\nexport default function (state = initHead, action) {\r\n  const {\r\n    type,\r\n    data\r\n  } = action;\r\n  switch (type) {\r\n    case SET_HEADT_TITLE:\r\n      return data;\r\n    default:\r\n      return state;\r\n  }\r\n}","import {\r\n  createStore,\r\n  applyMiddleware\r\n} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport {\r\n  composeWithDevTools\r\n} from 'redux-devtools-extension';\r\n\r\nimport reducer from './reducer'\r\n\r\nexport default createStore(reducer, composeWithDevTools(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport store from './redux';\r\nimport {Provider} from 'react-redux';\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n","export const SET_HEADT_TITLE = 'set_head_title';\r\nexport const LOGIN_USER_SUCCESS = 'login_success';\r\nexport const LOGIN_USER_FAILED = 'login_falied';\r\nexport const GET_USER = 'get_user';\r\nexport const REMOVE_USER = 'remove_user';","// 使用本地存储对用户状态进行保存  实现维持登录和自动登录功能\r\n// setItem(key,value) getItem(key) removeItem(key)\r\n\r\nconst store = window.localStorage;\r\nconst USER_KEY = 'user';\r\n\r\nexport default {\r\n  saveUser(value) {\r\n    store.setItem(USER_KEY, JSON.stringify(value));\r\n  },\r\n  getUser() {\r\n    let tem = store.getItem(USER_KEY);\r\n    if (tem) {\r\n      return JSON.parse(tem);\r\n    } else {\r\n      return null;\r\n    }\r\n  },\r\n  // 用于账号注销需要，删除用户\r\n  remove() {\r\n    store.removeItem(USER_KEY);\r\n  }\r\n}","// isLoading 的加载框\r\nimport React from 'react';\r\nimport { Spin, Alert } from 'antd';\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <>\r\n      <Spin tip=\"Loading...\">\r\n        <Alert\r\n          message=\"资源加载中，请耐心等待\"\r\n          description=\"\"\r\n          type=\"info\"\r\n        />\r\n      </Spin>,\r\n    </>\r\n  )\r\n}","import {\r\n  format\r\n} from 'date-fns'\r\n\r\n// 自定义登录页面 hook\r\nexport function loginReducer(state, action) {\r\n  const {\r\n    type\r\n  } = action;\r\n  switch (type) {\r\n    case 'isLogin':\r\n      return [true, true];\r\n    case 'success':\r\n      return [false, false];\r\n    case 'failed':\r\n      return [false, false];\r\n    default:\r\n      throw new Error('无效 行为');\r\n  }\r\n}\r\n\r\n// 格式化 url\r\nexport function formatUrl(url) {\r\n  return url.replace(/(\\/){2}/g, '/');\r\n}\r\n\r\n// 格式化日期\r\nexport function formatDate(date, regExp) {\r\n  return format(date, regExp);\r\n}\r\n\r\n// 商品分类转换\r\nexport const dataMapToOptions = (data, options) => {\r\n  options = options || [];\r\n  for (let i = 0; i < data.length; i++) {\r\n    let {\r\n      name\r\n    } = data[i];\r\n    options[i] = {};\r\n    options[i]['label'] = name;\r\n    options[i]['value'] = name;\r\n    if (data[i].childList) {\r\n      options[i]['children'] = dataMapToOptions(data[i].childList, []);\r\n    }\r\n  }\r\n  return options;\r\n}\r\n\r\n// 抽取导航信息\r\nexport const extractMenus = (menus, reqmenuList) => {\r\n  return reqmenuList.map(v => {\r\n    if (menus.includes(v.key)) {\r\n      return v;\r\n    } else if (v.children) {\r\n      let childs = v.children.filter(v => {\r\n        if (menus.includes(v.key)) {\r\n          return true\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n      if (childs.length > 0) {\r\n        return Object.assign({}, v, {\r\n          children: childs\r\n        });\r\n      }\r\n    }\r\n  })\r\n}\r\n// 将 reqmenuList 映射为menus\r\nexport const listMapToMenus = (reqmenuList, res) => {\r\n  reqmenuList.map(v => {\r\n    res.push(v.key);\r\n    if (v.children) {\r\n      listMapToMenus(v.children, res);\r\n    }\r\n  })\r\n}\r\n\r\n// 进入url时，判断是否有权限进入，否则返回false\r\nexport const hasPrivilege = (url, menus) => {\r\n  console.log(url);\r\n  console.log(menus);\r\n  let urlArr = url.split('/');\r\n  for (let i = 0; i < urlArr.length; i++) {\r\n    if (urlArr[i] === '') {\r\n      continue;\r\n    }\r\n    if (!menus.includes(urlArr[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n// 比较两个数据得到 title\r\nexport function getTitle(list, arr) {\r\n  for (let i = 0; i < arr.length; i++) {\r\n    for (let j = 0; j < list.length; j++) {\r\n      if (list[j] && list[j].key === arr[i]) {\r\n        if (list[j].children) {\r\n          arr.shift();\r\n          return getTitle(list[j].children, arr);\r\n        } else {\r\n          return list[j].title;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  for (let i = 0; i < arr.length; i++) {\r\n    for (let j = 0; j < list.length; j++) {\r\n      if (list[j] && list[j].children) {\r\n        return getTitle(list[j].children, arr);\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}"],"sourceRoot":""}